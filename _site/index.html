<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="google-site-verification" content="uPo9ejFsAXhqlhxbsrVtWkBWHQQDUGvP5lSSqj5Mb54" />
    
    <title>MATTENOBLE - Ruby, Software Development and other Stuff.</title>
    
    <link rel="stylesheet" type="text/css" href="/public/css/main.css" media="all">
    <link rel="stylesheet" type="text/css" href="/public/css/clouds.css" media="all">
    <script type="text/javascript" src="http://use.typekit.com/npn1una.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>
<body>
    <div id="wrap">
        <h1>
            <a href="/">
                <p>MATTENOBLE</p>
                <img src="/public/images/gem.png" alt="rubygem" />
                <div style="clear:both;"></div>
            </a>
        </h1>
        
        <div id="content">
            <div id="articles">
                
<div class="article">
    <h2><a href="/2011/04/24/deferred-return-values-for-rspec-stubs/">Blocky RSpec Stubbing</a></h2>
    <p>While working on <a href="http://github.com/mnoble/tabby">Tabby</a> I hit an issue when stubbing Tempfile.new. Instead of creating a Tempfile I wanted to just use a StringIO-ish (<code>FakeFile</code>) object so I didn&#8217;t write to the filesystem.</p>
<h3>The Problem</h3>
<pre class="clouds">
<span class="LibraryClassType">Tempfile</span>.<span class="FunctionName">stub</span>(<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>new</span>).<span class="FunctionName">and_return</span>(<span class="LibraryClassType">FakeFile</span>.<span class="FunctionName">new</span>)
</pre><p>The problem is that Tabby creates a new Tempfile for every tab it needs to make, meaning it can be multiple times depending on the setup.</p>
<p>So one of the setups in my tests has two tabs. For the first tab, my FakeFile object was opened, written to and closed. The next tab did the same, to that same exact FakeFile instance. Since it was already closed, I got <code>IOError: not opened for writing</code>. Lame.</p>
<h3>The Solution</h3>
<p>RSpec&#8217;s <code>and_returns</code> takes a block, that is evaluated when the stubbed method is called. This way it&#8217;s invoked from a different context each time, giving us a brand new FakeFile each time.</p>
<pre class="clouds">
<span class="LibraryClassType">Tempfile</span>.<span class="FunctionName">stub</span>(<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>new</span>).<span class="FunctionName">and_return</span> { <span class="LibraryClassType">FakeFile</span>.<span class="FunctionName">new</span> }
</pre><p>So if you have a stub that needs to return the same type of object, but a brand spank&#8217;n new instance of it each time, use a block.</p>
</div>

<div class="article">
    <h2><a href="/2011/04/02/value-of-it-just-working/">Taking Care of Business</a></h2>
    <p>One of the many things I love about the Ruby community is the notion that things should &#8220;just work&#8221; out of the box. I&#8217;m sure it&#8217;s in part due to Rails&#8217; convention over configuration mentality, but I think it&#8217;s more than that.</p>
<p>During the day I wear skin tight, rockstar style snake skin pants. If you aren&#8217;t picking up on my odd, far-reaching metaphor, I mean I write Python code. Anyway, it may just be a lack of experience in the community but things seem infinitely more complicated to get up and running than when I&#8217;m working with Ruby. It just feels like there is more between me and the end goal.</p>
<p>Here&#8217;s a few of my favorite pieces of &#8220;just works&#8221; Ruby software:</p>
<h3>Devise</h3>
<p><code>rails g devise:install</code> and <code>rails g devise user</code> Done. You&#8217;ve got a sign in page, a user model, migration and all the goodness. I just wrote the steps for adding authentication to an app in a single sentence. That&#8217;s incredible.</p>
<h3>Heroku</h3>
<p>Heroku is another great example that literally takes seconds to get up and running with. <code>rails new blog</code>, <code>heroku create</code>, <code>git push heroku master</code>. Done &amp; done. Application deployed and online.</p>
<h3>Rubygems</h3>
<p>So you have a gem you want to make available to the world? Simple, <code>gem build whatever.gemspec</code> and <code>gem push whatever-0.0.1.gem</code>. Done. Granted, I do know this one has a Python equivalent. <code>python setup.py register</code> claims to get you the same, but my recent attempts have all failed with, &#8220;You are not allowed to store &#8216;whatever&#8217; package information&#8221;. Okay.. so.. what now?</p>
<p>Tools are an important part of any developers day to day life. I think tools are partially why Ruby developers are typically quite productive. We see the value in good development tools and we spend time crafting them to &#8220;just work&#8221;.</p>
<p>This is only one of the many things I admire about the Ruby community, but it&#8217;s an important one. Having efficient tools helps make an efficient developer.</p>
</div>

<div class="article">
    <h2><a href="/2011/03/30/TADDD/">Test and Design Driven Development</a></h2>
    <p>For quite some time the way I&#8217;ve worked was to develop the application as if the interface didn&#8217;t matter, until it was done. Write my features, tests, etc and then when you have a functioning 1.0, slap some pretty on it. It always felt wrong, it felt unfair to the application.</p>
<p><a href="http://rubylearning.com/blog/2010/10/05/outside-in-development/">Outside-In Development</a> is pretty awesome but while it ends up being great for features and application code, it didn&#8217;t seem right for mixing in some design work. I&#8217;ve altered the my general, outside-in, workflow to include some design time. Here&#8217;s how it goes..</p>
<h3>Cucumber</h3>
<p>Write a feature; keep it high level and based on value (you already know this though). Lets say you&#8217;re working on the Authentication portion of your application. You want to make sure when a user signs in, they are greeted with the message &#8220;Hey there!&#8221;.</p>
<h3>RSpec, MiniTest, etc.</h3>
<p>Write some controller and model tests to get rolling with the lower level login stuff. Let&#8217;s pretend you just did that. A user can sign in and they will in fact see &#8220;Hey there!&#8221;. That&#8217;s awesome, nice work. Except&#8230;</p>
<p><img src="/public/images/taddd/crap-login.jpg" title="ugly login screen" alt="ugly login screen" /></p>
<p>Gross. You could leave it like this for the time being and move on to other features if you so incline. I, however, can not do that anymore. Having a functioning app with a lame UI sounds as bad as having no app at all to me.</p>
<h3>Design</h3>
<p>At this point, it&#8217;s time to put a little shine on your application. If you&#8217;re not doing both design and development you could probably even &#8220;get lean&#8221; here and send a &#8220;card&#8221; downstream to a designer. Hmm, <code>article_ideas += 1</code>.</p>
<p>Anyway, now that we know we have a reliable test suite for this feature, start playing with the UI. With all the cool things available these days like <span class="caps">SASS</span>, Compass, Haml, etc. this step should be fast and easy, even without Photoshop.</p>
<p><img src="/public/images/taddd/nice-login.jpg" title="pretty login screen" alt="pretty login screen" /></p>
<p>So now you have a well tested, functional and quite attractive sign in feature. The cool thing about this approach is that it integrates really well with the normal red, green, refactor methodology. This won&#8217;t be the last sign in feature you write, most likely, so every new one is a chance to not only refactor your code, but also the design.</p>
<p>So if you&#8217;re a designer/developer hybrid or are tasked to doing both, try this out. It&#8217;s helped me get that abstract vision for things into a clearer light, which is always a good thing.</p>
</div>

            </div>
            
        
            <ul id="article-nav">
            
                <li id="previous"><a href="/page2">&laquo; Previous</a></li>
            
            
            
            </ul>
        
        </div>
        
        <div id="sidebar">
            <p id="bio">
                I'm Matte Noble, a Software Developer, Ruby
                enthusiast, Metalhead and all around curious guy.
                This is where I share things I know and learn.
            </p>
            
            <ul>
                <li id="archive"><a href="/archive/">Archive</a></li>
                <li id="rss"><a href="/atom.xml">RSS</a></li>
                <li id="twitter"><a href="http://twitter.com/mattenoble">@mattenoble</a></li>
                <li id="github"><a href="http://github.com/mnoble">github.com/mnoble</a></li>
            </ul>
        </div>
        
        <div style="clear:both;"></div>
    </div>
</body>
</html>